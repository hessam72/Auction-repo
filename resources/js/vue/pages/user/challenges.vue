<template>



    <div class="challenges">
      
        <div class="challenge-container card flex flex-col relative">
            <div class="challenge-header">
                <div>
                    <h3 class="head">Daily challenge</h3>
                    <h3 class="date">02/14/23</h3>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing eque nulla et dolorem,
                    eanima sint similique sitferendis!</p>

            </div>
            <div class="challenge-prize">

                <div id='content'>
                    <aside class='ribbon'>
                        <h2 style="font-size: 1.3rem;
    letter-spacing: 1.2px;">150 Free Bids</h2>
                    </aside>

                </div>
            </div>
            <div class="progress flex justify-between items-center">
                <p>remaining:</p>
                <p>140/500</p>
            </div>
            <div class="challenge-timer flex justify-between items-center">
                <ion-icon name="alarm"></ion-icon>

                <vue-countdown :time="13 * 60 * 60 * 1000" v-slot="{ hours, minutes, seconds }">
                    <div class="count-down flex items-center">
                        <div class="number">{{ hours }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ minutes }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ seconds }}</div>
                    </div>
                </vue-countdown>

            </div>

        </div>


        <div class="challenge-container card flex flex-col relative">
            <div class="challenge-header">
                <div>
                    <h3 class="head">Daily challenge</h3>
                    <h3 class="date">02/14/23</h3>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing eque nulla et dolorem,
                    eanima sint similique sitferendis!</p>

            </div>
            <div class="challenge-prize">

                <div id='content'>
                    <aside class='ribbon'>
                        <h2 style="font-size: 1.3rem;
    letter-spacing: 1.2px;">150 Free Bids</h2>
                    </aside>

                </div>
            </div>
            <div class="progress flex justify-between items-center">
                <p>remaining:</p>
                <p>140/500</p>
            </div>
            <div class="challenge-timer flex justify-between items-center">
                <ion-icon name="alarm"></ion-icon>

                <vue-countdown :time="13 * 60 * 60 * 1000" v-slot="{ hours, minutes, seconds }">
                    <div class="count-down flex items-center">
                        <div class="number">{{ hours }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ minutes }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ seconds }}</div>
                    </div>
                </vue-countdown>

            </div>

        </div>


        <div class="challenge-container card flex flex-col relative">
            <div class="challenge-header">
                <div>
                    <h3 class="head">Daily challenge</h3>
                    <h3 class="date">02/14/23</h3>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing eque nulla et dolorem,
                    eanima sint similique sitferendis!</p>

            </div>
            <div class="challenge-prize">

                <div id='content'>
                    <aside class='ribbon'>
                        <h2 style="font-size: 1.3rem;
    letter-spacing: 1.2px;">150 Free Bids</h2>
                    </aside>

                </div>
            </div>
            <div class="progress flex justify-between items-center">
                <p>remaining:</p>
                <p>140/500</p>
            </div>
            <div class="challenge-timer flex justify-between items-center">
                <ion-icon name="alarm"></ion-icon>

                <vue-countdown :time="13 * 60 * 60 * 1000" v-slot="{ hours, minutes, seconds }">
                    <div class="count-down flex items-center">
                        <div class="number">{{ hours }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ minutes }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ seconds }}</div>
                    </div>
                </vue-countdown>

            </div>

        </div>


        <div class="challenge-container card flex flex-col relative">
            <div class="challenge-header">
                <div>
                    <h3 class="head">Daily challenge</h3>
                    <h3 class="date">02/14/23</h3>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing eque nulla et dolorem,
                    eanima sint similique sitferendis!</p>

            </div>
            <div class="challenge-prize">

                <div id='content'>
                    <aside class='ribbon'>
                        <h2 style="font-size: 1.3rem;
    letter-spacing: 1.2px;">150 Free Bids</h2>
                    </aside>

                </div>
            </div>
            <div class="progress flex justify-between items-center">
                <p>remaining:</p>
                <p>140/500</p>
            </div>
            <div class="challenge-timer flex justify-between items-center">
                <ion-icon name="alarm"></ion-icon>

                <vue-countdown :time="13 * 60 * 60 * 1000" v-slot="{ hours, minutes, seconds }">
                    <div class="count-down flex items-center">
                        <div class="number">{{ hours }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ minutes }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ seconds }}</div>
                    </div>
                </vue-countdown>

            </div>

        </div>


        <div class="challenge-container card flex flex-col relative">
            <div class="challenge-header">
                <div>
                    <h3 class="head">Daily challenge</h3>
                    <h3 class="date">02/14/23</h3>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing eque nulla et dolorem,
                    eanima sint similique sitferendis!</p>

            </div>
            <div class="challenge-prize">

                <div id='content'>
                    <aside class='ribbon'>
                        <h2 style="font-size: 1.3rem;
    letter-spacing: 1.2px;">150 Free Bids</h2>
                    </aside>

                </div>
            </div>
            <div class="progress flex justify-between items-center">
                <p>remaining:</p>
                <p>140/500</p>
            </div>
            <div class="challenge-timer flex justify-between items-center">
                <ion-icon name="alarm"></ion-icon>

                <vue-countdown :time="13 * 60 * 60 * 1000" v-slot="{ hours, minutes, seconds }">
                    <div class="count-down flex items-center">
                        <div class="number">{{ hours }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ minutes }}</div>
                        <div class="seperator">:</div>
                        <div class="number">{{ seconds }}</div>
                    </div>
                </vue-countdown>

            </div>

        </div>




    </div>
    <div v-if="is_loading_more" class="loading-container">
        <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"
            role="status">
            <span
                class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Loading...</span>
        </div>
    </div>
    <InfiniteLoading @infinite="loadData" />

</template>

<script setup>
import InfiniteLoading from "v3-infinite-loading";
import "v3-infinite-loading/lib/style.css"; //required if you're not going to override default slots


</script>

<script>
export default {
    data() {
        return {
            is_loading_more: false,
            show_more: false,
            show_more2: false,
        }
    },
    mounted() {
        var cards = $('.card');

        cards.each((index, card) => {
            $(card).prepend("<div class='shineLayer'></div>")
        });

        $(".card").mousemove(function (event) {

            var card = this;
            var mouseCoord = {
                x: event.offsetX,
                y: event.offsetY
            };

            //cleanup
            mouseCoord.x = mouseCoord.x < 0 ? 0 : mouseCoord.x;
            mouseCoord.x = mouseCoord.x > $(card).width() ? $(card).width() : mouseCoord.x;
            mouseCoord.y = mouseCoord.y < 0 ? 0 : mouseCoord.y;
            mouseCoord.y = mouseCoord.y > $(card).height() ? $(card).height() : mouseCoord.y;


            var transformCard = "scale3d(1.08, 1.08, 1.08) perspective(700px)";
            transformCard += " ";
            //rotateX between -9 and +9
            transformCard += "rotateX(" + ((((mouseCoord.y / $(card).height()) * 18) - 9)) + "deg)";
            transformCard += " ";
            //rotateY between -13 and +13
            transformCard += "rotateY(" + ((((mouseCoord.x / $(card).width()) * 26) - 13) * -1) + "deg)";

            transformCard += " ";
            //translateX between -3 and +3
            transformCard += "translateX(" + (((mouseCoord.x / $(card).width()) * 6) - 3) + "px)";
            transformCard += " ";
            //translateY between -5 and +5
            transformCard += "translateY(" + (((mouseCoord.y / $(card).height()) * 10) - 5) + "px)";

            $(card).css("transform", transformCard);

            //rotateX between -5 and +5
            var transformCardImage = "rotateX(" + ((((mouseCoord.y / $(card).height()) * 10) - 5) * -1) + "deg)";
            transformCardImage += " ";
            //rotateX between -13 and +13
            transformCardImage += "rotateY(" + ((((mouseCoord.x / $(card).width()) * 26) - 13) * -1) + "deg)";
            $(card).find("img").css("transform", transformCardImage);

            //opacity of ShineLayer between 0.1 and 0.4
            var backgroundShineLayerOpacity = ((mouseCoord.y / $(card).height()) * 0.3) + 0.1;
            //bottom=0deg; left=90deg; top=180deg; right=270deg;
            var backgroundShineLayerDegree = (Math.atan2(mouseCoord.y - ($(card).height() / 2), mouseCoord.x - ($(card).width() / 2)) * 180 / Math.PI) - 90;
            backgroundShineLayerDegree = backgroundShineLayerDegree < 0 ? backgroundShineLayerDegree += 360 : backgroundShineLayerDegree
            var backgroundShineLayer = "linear-gradient(" + backgroundShineLayerDegree + "deg, rgba(255,255,255," + backgroundShineLayerOpacity + ") 0%, rgba(255,255,255,0) 80%)";
            $(card).find(".shineLayer").css("background", backgroundShineLayer);
        });

        $(".card").mouseenter(function (event) {
            $(".card").addClass("blur");
            $(this).removeClass("blur");
        });

        $(".card").mouseleave(function (event) {
            var card = this;
            $(card).css("transform", "scale3d(1, 1, 1)");
            $(card).find("img").css("transform", "");
            $(card).find(".shineLayer").css("background", "linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 80%)");

            $(".card").removeClass("blur");
        });
    },
    methods: {
        loadData($state) {
            //calling the api
            // alert('load more');
            this.is_loading_more = true;
            setTimeout(() => {
                this.is_loading_more = false;
                if (this.show_more) {
                    this.show_more2 = true;
                }
                this.show_more = true;
            }, 2000);

        },
    },


}
</script>

<style lang="scss" scoped>
$bg: #E8B5DB;
$color-diamond: #C6ED8D;
$color-ribbon: #341e60;
$color-arrow: #8D96ED;
$color-rounded: #FC9E86;
$color-sheer: #85C9ED;

#content {
    position: absolute;
    width: 100%;
    left: 0;
    z-index: 1;
    top: 46%;
}

aside {
    margin: 20px 0;
    line-height: 34px;
    position: relative;
    cursor: pointer;
    user-select: none;

    &:hover {
        top: -1px;
    }

    &:active {
        top: 1px;
    }

    &.diamond {
        background-color: $color-diamond;

        &:after,
        &:before {
            border-color: transparent $color-diamond;
        }

        &:before {
            left: -17px;
            border-width: 17px 17px 17px 0;
        }

        &:after {
            right: -17px;
            border-width: 17px 0 17px 17px;
        }
    }

    &.ribbon {
        color: #fff;
        text-align: center;
        background-color: $color-ribbon;
        $color-ribbon: darken($color-ribbon, 10);

        &:before,
        &:after {
            top: 5px;
            z-index: -10;
        }

        &:before {
            border-color: $color-ribbon $color-ribbon $color-ribbon transparent;
            left: -25px;
            border-width: 17px;
        }

        &:after {
            border-color: $color-ribbon transparent $color-ribbon $color-ribbon;
            right: -25px;
            border-width: 17px;
        }
    }

    &.arrow {
        background-color: $color-arrow;

        &:after,
        &:before {
            border-width: 17px 0 17px 17px;
        }

        &:before {
            border-color: $color-arrow transparent;
            left: -17px;
        }

        &:after {
            border-color: transparent $color-arrow;
            right: -17px;
        }
    }

    &.rounded {
        background-color: $color-rounded;
        border-radius: 25px / 17px;
        left: -20px;
        width: 200px;
    }

    &.sheer {
        background-color: $color-sheer;
        left: -5px;
        width: 170px;

        &:after,
        &:before {
            border-width: 33px 10px 0 0;
        }

        &:before {
            left: -10px;
            border-color: transparent $color-sheer;
        }

        &:after {
            right: -10px;
            border-color: $color-sheer transparent;
        }
    }
}

aside:before,
aside:after {
    content: '';
    position: absolute;
    height: 0;
    width: 0;
    border-style: solid;
    border-width: 0;
}



.bookmarks-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    row-gap: 4rem;
    column-gap: 3rem;
    padding: 3rem 5rem;
}

.loading-container {

    width: 100%;
    margin: auto;
    text-align: center;
    margin-bottom: -2rem;

}

.challenge-container {
    width: 90%;
    border: 1.5px solid #666;
    border-radius: 15px;
    padding: 2rem 2rem;
    box-shadow: 0px 3px 13px #666;

    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
    color: #fff;
    cursor: pointer;
    transition: all .3s ease;

    .challenge-header {
        div {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.3rem;

            font-weight: 500;

            .head {
                // color: #000;
                font-weight: 700;
                text-shadow: 0 6px 5px #d778e66b;
                font-size: 1.3rem;
            }

            .date {
                font-size: 1rem;
            }

        }

        p {
            text-align: left;
            letter-spacing: .8px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
    }

    .challenge-prize {}

    .progress {
        margin-top: 1.5rem;
        font-size: 1.3rem;
        font-weight: 500;
        padding: 0.6rem;
        margin-bottom: 1rem;
    }

    .challenge-timer {
        ion-icon {
            font-size: 3.5rem;
            color: #341e60;
            filter: drop-shadow(0px 2px 2px #c420e1);
        }

        font-size: 1.2rem;
        font-weight: 500;
    }
}

.challenge-container:hover {
    scale: 1.03;

}

@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.count-down {
    gap: 0.5rem;
    font-size: 1.7rem;
    background-color: #fff;
    padding: 0.2rem 1.2rem;
    border-radius: 20px;
    box-shadow: 0px 6px 10px #999;
    color: #333;
}

.challenges {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    row-gap: 4rem;
    column-gap: 4rem;
    padding: 3rem 4rem;
    margin-top: 3rem;
}


//  card hover effect


.card-section {
    margin: 15px 0 20px 0;
    padding: 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.card-section>h1 {
    margin-top: 0;
    margin-bottom: 0;
}

.card-section>h4 {
    color: #999;
    margin-top: 3px;
    margin-bottom: 6px;
}

.card-list {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
}

.card {
  
    // overflow: hidden;
   
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2), 0 0 5px rgba(0, 0, 0, 0.15);
    transform: scale3d(1, 1, 1);
    transition: all 0.2s ease-out, filter 0.75s ease-out;

    filter: grayscale(0.1) saturate(95%) brightness(95%) contrast(90%);
}

.card:hover {
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 15px rgba(0, 0, 0, 0.3);
    filter: grayscale(0) saturate(101%) brightness(100%) contrast(100%);

}


.card>.shineLayer {
    height: 100%;
    width: 100%;
    background: linear-gradient(0deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 80%);
    transition: all 0.2s ease-out;
}
</style>